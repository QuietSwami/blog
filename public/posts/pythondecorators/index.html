<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Decorators in Python | Francisco Mendonca&#39;s Blog</title>
<meta name="keywords" content="">
<meta name="description" content="Python is renowned for its exceptional versatility, making it ideal for diverse applications, from web development to data science. In this blog post, we&rsquo;re diving into a powerful feature known as Decorators. Although I had not explored Decorators for quite some time, I decided it was finally time to thoroughly understand and master them.
Understanding Nested Functions in Python
Before diving into decorators, it&rsquo;s helpful to understand nested functions in Python. A nested function is defined within another function, and it can access variables from the enclosing scope. Here’s an example to illustrate this:">
<meta name="author" content="Francisco Mendonca">
<link rel="canonical" href="http://localhost:1313/posts/pythondecorators/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css" integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z&#43;V9&#43;cO1A=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/pythondecorators/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Decorators in Python" />
<meta property="og:description" content="Python is renowned for its exceptional versatility, making it ideal for diverse applications, from web development to data science. In this blog post, we&rsquo;re diving into a powerful feature known as Decorators. Although I had not explored Decorators for quite some time, I decided it was finally time to thoroughly understand and master them.
Understanding Nested Functions in Python
Before diving into decorators, it&rsquo;s helpful to understand nested functions in Python. A nested function is defined within another function, and it can access variables from the enclosing scope. Here’s an example to illustrate this:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/pythondecorators/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-05-06T21:21:51+02:00" />
<meta property="article:modified_time" content="2024-05-06T21:21:51+02:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Decorators in Python"/>
<meta name="twitter:description" content="Python is renowned for its exceptional versatility, making it ideal for diverse applications, from web development to data science. In this blog post, we&rsquo;re diving into a powerful feature known as Decorators. Although I had not explored Decorators for quite some time, I decided it was finally time to thoroughly understand and master them.
Understanding Nested Functions in Python
Before diving into decorators, it&rsquo;s helpful to understand nested functions in Python. A nested function is defined within another function, and it can access variables from the enclosing scope. Here’s an example to illustrate this:"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Decorators in Python",
      "item": "http://localhost:1313/posts/pythondecorators/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Decorators in Python",
  "name": "Decorators in Python",
  "description": "Python is renowned for its exceptional versatility, making it ideal for diverse applications, from web development to data science. In this blog post, we\u0026rsquo;re diving into a powerful feature known as Decorators. Although I had not explored Decorators for quite some time, I decided it was finally time to thoroughly understand and master them.\nUnderstanding Nested Functions in Python Before diving into decorators, it\u0026rsquo;s helpful to understand nested functions in Python. A nested function is defined within another function, and it can access variables from the enclosing scope. Here’s an example to illustrate this:\n",
  "keywords": [
    
  ],
  "articleBody": "Python is renowned for its exceptional versatility, making it ideal for diverse applications, from web development to data science. In this blog post, we’re diving into a powerful feature known as Decorators. Although I had not explored Decorators for quite some time, I decided it was finally time to thoroughly understand and master them.\nUnderstanding Nested Functions in Python Before diving into decorators, it’s helpful to understand nested functions in Python. A nested function is defined within another function, and it can access variables from the enclosing scope. Here’s an example to illustrate this:\ndef outer(x): def inner(y): return x + y return inner adding = outer(9) # At this moment, the outer function is initialized with the argument 5. result = adding(10) # now we initilize the inner function with argument 6 print(result) # Result: 19 In the example above, inner is a nested function that adds a given number y to x, which is a parameter of the outer function outer. The nested function inner is only created and accessible within the outer function, not outside of it.\nNested functions are valuable for several reasons:\nEncapsulation: They help keep parts of code tightly coupled and hidden from the global scope. Scope Management: They can manipulate variables from their enclosing scope. Factory Functions: They can be used to create specific types of functions dynamically. Closures: They allow the inner function to remember the state of its environment, even after the outer function has finished executing. Decoding Decorators Moving from nested functions to decorators, a decorator in Python is essentially a function that takes another function and extends its behavior without permanently modifying it. This is a fundamental concept in Python, especially useful in scenarios like logging, access control, memoization, and more.\ndef my_decorator(func): def wrapper(): print(\"Something happens before func execution\") func() print(\"Something happens after func execution\") return wrapper @my_decorator def say_hello(): print(\"Hello, World!\") Unlike Nested Functions, Decorators are specifically built to enhance or modify the behaviour of other functions. They provide a clear, readable way to apply common functionality to multiple functions or methods, while nested functions can only serve function described within.\nProperties Decorators have certain properties that should be noted. Understanding these allows us to extract more value from using decorators.\nStacking Decorators can be stacked, meaning one function can have more than one decorator. Each decorator wraps the function return by the decorator beneath it. This is particularly useful for combining functionalities such as logging, error handling and access control in a modular way\n@decorator2 @decorator1 def some_function(): return None When stacking decorators, the decorator closest to the function definition runs first as a wrapper, but last in execution flow around the function call itself. This is beacuse each decorator wraps the result of the previous decorator.\n# [ [ [ [ # F D F D G u e u e O o n c n c r A c o c o d T t r t r e i a i a r D o t o t i n o n o o a ] r ] r f g 1 1 r ] ] E a x m e [ [ c t D D u o e [ e [ t c D c D i I o e o e o l r c r c n l a o a o : u t r t r s o a o a f t r t r t u r 1 o 1 o n a ] r ] r c t 2 2 t e : ] : ] i o S f : E : n t u x a n d e E c c e c x k t c u e e i o t c d d o r e u e n a s t c D t e o e i o f s r c s r i a o 1 r n t r w s e o a r i t x r t a s t 1 o p r p w s e r d a i p d n b p e y e c P d o y d r t e b a h c y t o o o n r d r a e 2 t c o o r r 1 a t o r 2 Parameterization Decorators can be designed to take arguments. This requires the creation of a decorator factory, which returns a decorator. This is useful when you need to customize the behavior of the decorator for different functions:\ndef repeat(number_of_times): def decorator(func): def wrapper(*args, **kwargs): for _ in range(number_of_times): result = func(*args, **kwargs) return result return wrapper return decorator @repeat(number_of_times=3) def greet(name): print(f\"Hello {name}\") greet(\"Alice\") Metadata Preserverance By default decorators do not keep a function’s metadata (name, docstring and annotations). This is typically achieved using functools.wraps in the decorator’s wrapper function:\nimport functools def my_decorator(func): @functools.wraps(func) def wrapper(*args, **kwargs): \"\"\"Wrapper function\"\"\" print(\"Something is happening before the function is called.\") return func(*args, **kwargs) return wrapper @my_decorator def say_hello(): \"\"\"Say hello function\"\"\" print(\"Hello!\") print(say_hello.__name__) # Outputs 'say_hello' print(say_hello.__doc__) # Outputs 'Say hello function' Non-Functional Decorators (Class Decorators) Decorators aren’t limited to functions; they can also be used to be applied to classes. Class decorators can modify or enhance class behavior in a similar way to function decorators:\ndef decorator(cls): class WrappedClass(cls): def new_method(self): return \"This is a new method added by the decorator\" return WrappedClass @decorator class OriginalClass: def original_method(self): return \"This method is part of the original class\" obj = OriginalClass() print(obj.new_method()) # Outputs: This is a new method added by the decorator Usage Function Decorators Decorators should be used when there is several functions that need to share common functionality, avoiding code duplication. For example, a great use case is logging and debugging the execution of a program. Decorators can be used to log entry, exit and various states of function execution without cluttering the actual business logic with logging code.\ndef log_execution(func): def wrapper(*args, **kwargs): print(f\"Entering {func.__name__}...\") result = func(*args, **kwargs) print(f\"Exiting {func.__name__}...\") print(f\"Execution status: {result}\") return result return wrapper @log_execution def my_function(): # function code here pass Decorators as Performance Measurment Another use case is the usage of Decorators as performance measurement. A decorator can be developed to add timing code that records how long a functions takes to run.\nimport time def measure_time(func): def wrapper(*args, **kwargs): start_time = time.time() result = func(*args, **kwargs) end_time = time.time() execution_time = end_time - start_time print(f\"Function {func.__name__} took {execution_time} seconds to run.\") return result return wrapper @measure_time def my_function(): # function code here pass Decorators for Access Control Certain function will require a finer access control and authentication policies. A decorator can be used to add this to certain function, ensuring that only authorized users are able to execute ceratin functionalities. This is common in web frameworks where ceratin routes or actions are restricted to logged-in users or users with specific roles.\n# Simulating a user database and session users = { 'alice': 'password123', 'bob': 'securepassword' } current_user = None def login(username, password): \"\"\" Simulate user login, setting the current user if successful. \"\"\" global current_user if username in users and users[username] == password: current_user = username print(f\"{username} has logged in successfully.\") return True print(\"Failed login attempt.\") return False def logout(): \"\"\" Log out the current user \"\"\" global current_user current_user = None print(\"User has been logged out.\") def is_logged_in(): \"\"\" Check if there's a user logged in \"\"\" return current_user is not None def login_required(func): \"\"\" Decorator to ensure the user is logged in before calling the function \"\"\" def wrapper(*args, **kwargs): if not is_logged_in(): raise Exception(\"You must be logged in to access this function.\") return func(*args, **kwargs) return wrapper @login_required def protected_function(): \"\"\" Function that only executes if the user is authenticated \"\"\" print(f\"Access granted to {current_user}. Running protected function.\") # Example usage login('alice', 'password123') # Log in the user protected_function() # Should work as the user is logged in logout() # Log out the user try: protected_function() # Should raise an exception as the user is not logged in except Exception as e: print(e) Input Validation with Decorators Another useful use-case is the use of decorators as input validating, which can be used to check the arguments apssed to a function before being executed. This helps maintaining clean and error-free data processing within functions\ndef validate_inputs(func): \"\"\" Decorator to validate that inputs to the function are positive numbers. \"\"\" def wrapper(*args, **kwargs): # Check all positional arguments for arg in args: if not isinstance(arg, (int, float)) or arg \u003c= 0: raise ValueError(\"All dimensions must be positive numbers.\") # Check all keyword arguments for value in kwargs.values(): if not isinstance(value, (int, float)) or value \u003c= 0: raise ValueError(\"All dimensions must be positive numbers.\") return func(*args, **kwargs) return wrapper @validate_inputs def calculate_area(length, width): \"\"\" Calculate the area of a rectangle given length and width, both must be positive numbers. \"\"\" return length * width # Example usage try: print(\"Area:\", calculate_area(5, 10)) # Valid input print(\"Area:\", calculate_area(-5, 10)) # This should raise an exception except ValueError as e: print(e) try: print(\"Area:\", calculate_area(length=5, width=3)) # Valid input print(\"Area:\", calculate_area(length=5, width=-3)) # This should raise an exception except ValueError as e: print(e) Decorators as Caching Mechanisms Decorators can also be leverage as abastract caching mechanism. Any function that is decorated with this caching function can have their results cached before being returned. The following example displays how this caching mechanism can be used with a fibonnaci function. Before the decorated function is executed, the decorator retrieves any data that is cached and passes to the fibonnaci function.\ndef memorize(func): \"\"\" Decorator that caches the results of the function calls. \"\"\" cache = {} # Cache to store results of expensive function calls def wrapper(*args): if args in cache: return cache[args] # Return cached result if available result = func(*args) # Calculate result since it's not cached cache[args] = result # Store the new result in cache return result return wrapper @memorize def fibonacci(n): \"\"\" Recursive function to calculate the nth Fibonacci number. \"\"\" if n in (0, 1): # Base cases return n return fibonacci(n-1) + fibonacci(n-2) # Recursive call # Example usage print(f\"Fibonacci 10: {fibonacci(10)}\") # This should compute and then cache all values up to Fib(10) print(f\"Fibonacci 20: {fibonacci(20)}\") # This should use cached values for Fib(0) to Fib(10) and compute the rest Enrinching Metadata with Decorators Decorators could be used to enrich metadata by appending additional information to the output of a function. The following example displays a nested decorator, which enriches the output of the decorated function.\ndef enrich_output(unit): \"\"\" Decorator to enrich function outputs with additional data such as units. \"\"\" def decorator(func): def wrapper(*args, **kwargs): result = func(*args, **kwargs) # Get the original function result enriched_result = { 'value': result, 'units': unit } # Enrich the output with additional information return enriched_result return wrapper return decorator @enrich_output('square meters') def calculate_area(length, width): \"\"\" Calculate the area of a rectangle given length and width. \"\"\" return length * width # Example usage area = calculate_area(5, 10) print(area) # Output will be a dictionary with the area and the units Event Handling with Decorators Flask uses decorators to handle events. When a request is done to a specific Flask endpoint, Flask treats the HTTP request and triggers an action described in the decorated function. Then, when the function finishes execution, it takes the output and transforms it into a HTTP response.\nimport functools import logging # Setting up logging logging.basicConfig(level=logging.INFO) def event_notifier(func): \"\"\" Decorator to notify events when the function is called and after it completes. \"\"\" @functools.wraps(func) def wrapper(*args, **kwargs): logging.info(f\"Function {func.__name__} called with args: {args} and kwargs: {kwargs}\") try: result = func(*args, **kwargs) logging.info(f\"Function {func.__name__} completed successfully with result: {result}\") return result except Exception as e: logging.error(f\"Function {func.__name__} raised an error: {e}\") raise # Re-raise the exception after logging it return wrapper @event_notifier def add_numbers(a, b): \"\"\" Adds two numbers and returns the result. \"\"\" return a + b @event_notifier def fail_function(): \"\"\" A function designed to fail to demonstrate error logging. \"\"\" raise ValueError(\"Intentional error for demonstration.\") # Example usage print(\"Result of add_numbers:\", add_numbers(5, 10)) # Should log call and completion try: fail_function() # Should log the call and the error except ValueError as e: print(f\"Caught an error: {e}\") Class Decorators As explained before, decorators aren’t restricted to functions, they can also be used to extend a class functionality. They can be used to extend the functionality of several classes with additional methods, or alter existing methods. This is commonly used in framewors or libraries where certain behaviors need to be standardized across multiple classes. Decorators should be used in lieu of inheritance where flexibility and reusability are needed, improving the seperation of concerns. They can be dynamically applyed, meaning, they are applied at runtime, depending on the conditions of the program’s execution or configuration.\ndef add_logging(cls): class WrappedClass(cls): def log_method(self, method_name): print(f\"Method {method_name} started\") result = method_name() print(f\"Method {method_name} ended\") return result def __getattr__(self, name): attr = getattr(super(), name) if callable(attr): def wrapper(*args, **kwargs): return self.log_method(lambda: attr(*args, **kwargs)) return wrapper return attr return WrappedClass @add_logging class SomeClass: def method_one(self): print(\"Executing method one\") def method_two(self): print(\"Executing method two\") obj = SomeClass() obj.method_one() ### Ensure Classes Adhere to Interface\nFurthermore, decorators can be used to ensure that certain classes adhere to a defined interface or abstract base class without using inheritance. This is particularly useful in large systems adhering to strict architectural patterns where specific methods must be implemented by multiple classes:\ndef ensure_interface(interface): def decorator(cls): missing_methods = [m for m in interface if not hasattr(cls, m)] if missing_methods: raise TypeError(f\"Class {cls.__name__} does not implement {missing_methods}\") return cls return decorator @ensure_interface(['process', 'validate']) class Processor: def process(self): pass # Implement the required method # Validate method is intentionally missing to show the error # This will raise a TypeError indicating the 'validate' method is missing. Singletons Finally, decorators can be used to enforce the singleton pattern, limiting a class to a single instance throughout the lifetime of a program. This is commonly used in cases you need a controlled access point to a resrouce, such as a database connection or a configuration manager.\ndef singleton(cls): instances = {} def get_instance(*args, **kwargs): if cls not in instances: instances[cls] = cls(*args, **kwargs) return instances[cls] return get_instance @singleton class DatabaseConnection: def __init__(self): self.status = 'Connected' # Both instances will actually be the same object db1 = DatabaseConnection() db2 = DatabaseConnection() print(db1 is db2) # Outputs: True ",
  "wordCount" : "2419",
  "inLanguage": "en",
  "datePublished": "2024-05-06T21:21:51+02:00",
  "dateModified": "2024-05-06T21:21:51+02:00",
  "author":{
    "@type": "Person",
    "name": "Francisco Mendonca"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/pythondecorators/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Francisco Mendonca's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Francisco Mendonca&#39;s Blog (Alt + H)">Francisco Mendonca&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Decorators in Python
    </h1>
    <div class="post-meta"><span title='2024-05-06 21:21:51 +0200 CEST'>May 6, 2024</span>&nbsp;·&nbsp;12 min&nbsp;·&nbsp;Francisco Mendonca

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#understanding-nested-functions-in-python" aria-label="Understanding Nested Functions in Python">Understanding Nested Functions in Python</a></li>
                <li>
                    <a href="#decoding-decorators" aria-label="Decoding Decorators">Decoding Decorators</a></li>
                <li>
                    <a href="#properties" aria-label="Properties">Properties</a><ul>
                        
                <li>
                    <a href="#stacking" aria-label="Stacking">Stacking</a></li>
                <li>
                    <a href="#parameterization" aria-label="Parameterization">Parameterization</a></li>
                <li>
                    <a href="#metadata-preserverance" aria-label="Metadata Preserverance">Metadata Preserverance</a></li>
                <li>
                    <a href="#non-functional-decorators-class-decorators" aria-label="Non-Functional Decorators (Class Decorators)">Non-Functional Decorators (Class Decorators)</a></li></ul>
                </li>
                <li>
                    <a href="#usage" aria-label="Usage">Usage</a><ul>
                        
                <li>
                    <a href="#function-decorators" aria-label="Function Decorators">Function Decorators</a></li>
                <li>
                    <a href="#decorators-as-performance-measurment" aria-label="Decorators as Performance Measurment">Decorators as Performance Measurment</a></li>
                <li>
                    <a href="#decorators-for-access-control" aria-label="Decorators for Access Control">Decorators for Access Control</a></li>
                <li>
                    <a href="#input-validation-with-decorators" aria-label="Input Validation with Decorators">Input Validation with Decorators</a></li>
                <li>
                    <a href="#decorators-as-caching-mechanisms" aria-label="Decorators as Caching Mechanisms">Decorators as Caching Mechanisms</a></li>
                <li>
                    <a href="#enrinching-metadata-with-decorators" aria-label="Enrinching Metadata with Decorators">Enrinching Metadata with Decorators</a></li>
                <li>
                    <a href="#event-handling-with-decorators" aria-label="Event Handling with Decorators">Event Handling with Decorators</a></li>
                <li>
                    <a href="#class-decorators" aria-label="Class Decorators">Class Decorators</a></li>
                <li>
                    <a href="#singletons" aria-label="Singletons">Singletons</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>Python is renowned for its exceptional versatility, making it ideal for diverse applications, from web development to data science. In this blog post, we&rsquo;re diving into a powerful feature known as Decorators. Although I had not explored Decorators for quite some time, I decided it was finally time to thoroughly understand and master them.</p>
<h2 id="understanding-nested-functions-in-python">Understanding Nested Functions in Python<a hidden class="anchor" aria-hidden="true" href="#understanding-nested-functions-in-python">#</a></h2>
<p>Before diving into decorators, it&rsquo;s helpful to understand nested functions in Python. A nested function is defined within another function, and it can access variables from the enclosing scope. Here’s an example to illustrate this:</p>






<pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">outer</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">inner</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">adding</span> <span class="o">=</span> <span class="n">outer</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="c1"># At this moment, the outer function is initialized with the argument 5.</span>
</span></span><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">adding</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># now we initilize the inner function with argument 6</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="c1"># Result: 19</span></span></span></code></pre></div></pre>
<p>In the example above, inner is a nested function that adds a given number y to x, which is a parameter of the outer function outer. The nested function inner is only created and accessible within the outer function, not outside of it.</p>
<p>Nested functions are valuable for several reasons:</p>
<ul>
<li>Encapsulation: They help keep parts of code tightly coupled and hidden from the global scope.</li>
<li>Scope Management: They can manipulate variables from their enclosing scope.</li>
<li>Factory Functions: They can be used to create specific types of functions dynamically.</li>
<li>Closures: They allow the inner function to remember the state of its environment, even after the outer function has finished executing.</li>
</ul>
<h2 id="decoding-decorators">Decoding Decorators<a hidden class="anchor" aria-hidden="true" href="#decoding-decorators">#</a></h2>
<p>Moving from nested functions to decorators, a decorator in Python is essentially a function that takes another function and extends its behavior without permanently modifying it. This is a fundamental concept in Python, especially useful in scenarios like logging, access control, memoization, and more.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">my_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Something happens before func execution&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">func</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Something happens after func execution&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">wrapper</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@my_decorator</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">say_hello</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Hello, World!&#34;</span><span class="p">)</span>
</span></span></code></pre></div><p>Unlike Nested Functions, Decorators are specifically built to enhance or modify the behaviour of other functions. They provide a clear, readable way to apply common functionality to multiple functions or methods, while nested functions can only serve function described within.</p>
<h2 id="properties">Properties<a hidden class="anchor" aria-hidden="true" href="#properties">#</a></h2>
<p>Decorators have certain properties that should be noted. Understanding these allows us to extract more value from using decorators.</p>
<h3 id="stacking">Stacking<a hidden class="anchor" aria-hidden="true" href="#stacking">#</a></h3>
<p>Decorators can be stacked, meaning one function can have more than one decorator. Each decorator wraps the function return by the decorator beneath it. This is particularly useful for combining functionalities such as logging, error handling and access control in a modular way</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="nd">@decorator2</span>
</span></span><span class="line"><span class="cl"><span class="nd">@decorator1</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">some_function</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">None</span>
</span></span></code></pre></div><p>When stacking decorators, the decorator closest to the function definition runs first as a wrapper, but last in execution flow around the function call itself. This is beacuse each decorator wraps the result of the previous decorator.</p>



<div class="goat svg-container ">
  
    <svg
      xmlns="http://www.w3.org/2000/svg"
      font-family="Menlo,Lucida Console,monospace"
      
        viewBox="0 0 536 137"
      >
      <g transform='translate(8,16)'>
<path d='M 88,32 L 96,32' fill='none' stroke='currentColor'></path>
<path d='M 104,48 L 112,48' fill='none' stroke='currentColor'></path>
<path d='M 88,64 L 96,64' fill='none' stroke='currentColor'></path>
<path d='M 104,80 L 112,80' fill='none' stroke='currentColor'></path>
<path d='M 248,112 L 256,112' fill='none' stroke='currentColor'></path>
<path d='M 360,112 L 368,112' fill='none' stroke='currentColor'></path>
<polygon points='104.000000,32.000000 92.000000,26.400000 92.000000,37.599998' fill='currentColor' transform='rotate(0.000000, 96.000000, 32.000000)'></polygon>
<polygon points='104.000000,64.000000 92.000000,58.400002 92.000000,69.599998' fill='currentColor' transform='rotate(0.000000, 96.000000, 64.000000)'></polygon>
<polygon points='120.000000,48.000000 108.000000,42.400002 108.000000,53.599998' fill='currentColor' transform='rotate(0.000000, 112.000000, 48.000000)'></polygon>
<polygon points='120.000000,80.000000 108.000000,74.400002 108.000000,85.599998' fill='currentColor' transform='rotate(0.000000, 112.000000, 80.000000)'></polygon>
<polygon points='264.000000,112.000000 252.000000,106.400002 252.000000,117.599998' fill='currentColor' transform='rotate(0.000000, 256.000000, 112.000000)'></polygon>
<polygon points='376.000000,112.000000 364.000000,106.400002 364.000000,117.599998' fill='currentColor' transform='rotate(0.000000, 368.000000, 112.000000)'></polygon>
<text text-anchor='middle' x='0' y='4' fill='currentColor' style='font-size:1em'>#</text>
<text text-anchor='middle' x='0' y='36' fill='currentColor' style='font-size:1em'>[</text>
<text text-anchor='middle' x='0' y='52' fill='currentColor' style='font-size:1em'>[</text>
<text text-anchor='middle' x='0' y='68' fill='currentColor' style='font-size:1em'>[</text>
<text text-anchor='middle' x='0' y='84' fill='currentColor' style='font-size:1em'>[</text>
<text text-anchor='middle' x='0' y='116' fill='currentColor' style='font-size:1em'>#</text>
<text text-anchor='middle' x='8' y='36' fill='currentColor' style='font-size:1em'>F</text>
<text text-anchor='middle' x='8' y='52' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='8' y='68' fill='currentColor' style='font-size:1em'>F</text>
<text text-anchor='middle' x='8' y='84' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='16' y='4' fill='currentColor' style='font-size:1em'>G</text>
<text text-anchor='middle' x='16' y='36' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='16' y='52' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='16' y='68' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='16' y='84' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='16' y='116' fill='currentColor' style='font-size:1em'>O</text>
<text text-anchor='middle' x='24' y='4' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='24' y='36' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='24' y='52' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='24' y='68' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='24' y='84' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='24' y='116' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='32' y='4' fill='currentColor' style='font-size:1em'>A</text>
<text text-anchor='middle' x='32' y='36' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='32' y='52' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='32' y='68' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='32' y='84' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='32' y='116' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='40' y='4' fill='currentColor' style='font-size:1em'>T</text>
<text text-anchor='middle' x='40' y='36' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='40' y='52' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='40' y='68' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='40' y='84' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='40' y='116' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='48' y='36' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='48' y='52' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='48' y='68' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='48' y='84' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='48' y='116' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='56' y='4' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='56' y='36' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='56' y='52' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='56' y='68' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='56' y='84' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='64' y='4' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='64' y='36' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='64' y='52' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='64' y='68' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='64' y='84' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='64' y='116' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='72' y='4' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='72' y='36' fill='currentColor' style='font-size:1em'>]</text>
<text text-anchor='middle' x='72' y='52' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='72' y='68' fill='currentColor' style='font-size:1em'>]</text>
<text text-anchor='middle' x='72' y='84' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='72' y='116' fill='currentColor' style='font-size:1em'>f</text>
<text text-anchor='middle' x='80' y='4' fill='currentColor' style='font-size:1em'>g</text>
<text text-anchor='middle' x='80' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='80' y='84' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='88' y='4' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='88' y='52' fill='currentColor' style='font-size:1em'>]</text>
<text text-anchor='middle' x='88' y='84' fill='currentColor' style='font-size:1em'>]</text>
<text text-anchor='middle' x='88' y='116' fill='currentColor' style='font-size:1em'>E</text>
<text text-anchor='middle' x='96' y='4' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='96' y='116' fill='currentColor' style='font-size:1em'>x</text>
<text text-anchor='middle' x='104' y='4' fill='currentColor' style='font-size:1em'>m</text>
<text text-anchor='middle' x='104' y='116' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='112' y='36' fill='currentColor' style='font-size:1em'>[</text>
<text text-anchor='middle' x='112' y='68' fill='currentColor' style='font-size:1em'>[</text>
<text text-anchor='middle' x='112' y='116' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='120' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='120' y='36' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='120' y='68' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='120' y='116' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='128' y='4' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='128' y='36' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='128' y='52' fill='currentColor' style='font-size:1em'>[</text>
<text text-anchor='middle' x='128' y='68' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='128' y='84' fill='currentColor' style='font-size:1em'>[</text>
<text text-anchor='middle' x='128' y='116' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='136' y='36' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='136' y='52' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='136' y='68' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='136' y='84' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='136' y='116' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='144' y='4' fill='currentColor' style='font-size:1em'>I</text>
<text text-anchor='middle' x='144' y='36' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='144' y='52' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='144' y='68' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='144' y='84' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='144' y='116' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='152' y='4' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='152' y='36' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='152' y='52' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='152' y='68' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='152' y='84' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='152' y='116' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='160' y='4' fill='currentColor' style='font-size:1em'>l</text>
<text text-anchor='middle' x='160' y='36' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='160' y='52' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='160' y='68' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='160' y='84' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='160' y='116' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='168' y='4' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='168' y='36' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='168' y='52' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='168' y='68' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='168' y='84' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='176' y='4' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='176' y='36' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='176' y='52' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='176' y='68' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='176' y='84' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='176' y='116' fill='currentColor' style='font-size:1em'>f</text>
<text text-anchor='middle' x='184' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='184' y='36' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='184' y='52' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='184' y='68' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='184' y='84' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='184' y='116' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='192' y='4' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='192' y='36' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='192' y='52' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='192' y='68' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='192' y='84' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='192' y='116' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='200' y='4' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='200' y='36' fill='currentColor' style='font-size:1em'>]</text>
<text text-anchor='middle' x='200' y='52' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='200' y='68' fill='currentColor' style='font-size:1em'>]</text>
<text text-anchor='middle' x='200' y='84' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='200' y='116' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='208' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='208' y='52' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='208' y='84' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='208' y='116' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='216' y='4' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='216' y='36' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='216' y='52' fill='currentColor' style='font-size:1em'>]</text>
<text text-anchor='middle' x='216' y='68' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='216' y='84' fill='currentColor' style='font-size:1em'>]</text>
<text text-anchor='middle' x='216' y='116' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='224' y='116' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='232' y='4' fill='currentColor' style='font-size:1em'>S</text>
<text text-anchor='middle' x='232' y='36' fill='currentColor' style='font-size:1em'>f</text>
<text text-anchor='middle' x='232' y='52' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='232' y='68' fill='currentColor' style='font-size:1em'>E</text>
<text text-anchor='middle' x='232' y='84' fill='currentColor' style='font-size:1em'>:</text>
<text text-anchor='middle' x='232' y='116' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='240' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='240' y='36' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='240' y='68' fill='currentColor' style='font-size:1em'>x</text>
<text text-anchor='middle' x='248' y='4' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='248' y='36' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='248' y='52' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='248' y='68' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='248' y='84' fill='currentColor' style='font-size:1em'>E</text>
<text text-anchor='middle' x='256' y='4' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='256' y='36' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='256' y='52' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='256' y='68' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='256' y='84' fill='currentColor' style='font-size:1em'>x</text>
<text text-anchor='middle' x='264' y='4' fill='currentColor' style='font-size:1em'>k</text>
<text text-anchor='middle' x='264' y='36' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='264' y='52' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='264' y='68' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='264' y='84' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='272' y='4' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='272' y='36' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='272' y='52' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='272' y='68' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='272' y='84' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='272' y='116' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='280' y='4' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='280' y='36' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='280' y='52' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='280' y='68' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='280' y='84' fill='currentColor' style='font-size:1em'>u</text>
<text text-anchor='middle' x='280' y='116' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='288' y='36' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='288' y='52' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='288' y='68' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='288' y='84' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='288' y='116' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='296' y='4' fill='currentColor' style='font-size:1em'>D</text>
<text text-anchor='middle' x='296' y='52' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='296' y='84' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='296' y='116' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='304' y='4' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='304' y='36' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='304' y='52' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='304' y='68' fill='currentColor' style='font-size:1em'>f</text>
<text text-anchor='middle' x='304' y='84' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='304' y='116' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='312' y='4' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='312' y='36' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='312' y='52' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='312' y='68' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='312' y='116' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='320' y='4' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='320' y='52' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='320' y='68' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='320' y='84' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='320' y='116' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='328' y='4' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='328' y='36' fill='currentColor' style='font-size:1em'>w</text>
<text text-anchor='middle' x='328' y='68' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='328' y='84' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='328' y='116' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='336' y='4' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='336' y='36' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='336' y='52' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='336' y='68' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='336' y='84' fill='currentColor' style='font-size:1em'>x</text>
<text text-anchor='middle' x='336' y='116' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='344' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='344' y='36' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='344' y='52' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='344' y='84' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='344' y='116' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='352' y='4' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='352' y='36' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='360' y='4' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='360' y='36' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='360' y='52' fill='currentColor' style='font-size:1em'>w</text>
<text text-anchor='middle' x='368' y='4' fill='currentColor' style='font-size:1em'>s</text>
<text text-anchor='middle' x='368' y='36' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='368' y='52' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='376' y='36' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='376' y='52' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='384' y='4' fill='currentColor' style='font-size:1em'>i</text>
<text text-anchor='middle' x='384' y='52' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='384' y='116' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='392' y='4' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='392' y='36' fill='currentColor' style='font-size:1em'>b</text>
<text text-anchor='middle' x='392' y='52' fill='currentColor' style='font-size:1em'>p</text>
<text text-anchor='middle' x='392' y='116' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='400' y='36' fill='currentColor' style='font-size:1em'>y</text>
<text text-anchor='middle' x='400' y='52' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='400' y='116' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='408' y='4' fill='currentColor' style='font-size:1em'>P</text>
<text text-anchor='middle' x='408' y='52' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='408' y='116' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='416' y='4' fill='currentColor' style='font-size:1em'>y</text>
<text text-anchor='middle' x='416' y='36' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='416' y='116' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='424' y='4' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='424' y='36' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='424' y='52' fill='currentColor' style='font-size:1em'>b</text>
<text text-anchor='middle' x='424' y='116' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='432' y='4' fill='currentColor' style='font-size:1em'>h</text>
<text text-anchor='middle' x='432' y='36' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='432' y='52' fill='currentColor' style='font-size:1em'>y</text>
<text text-anchor='middle' x='432' y='116' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='440' y='4' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='440' y='36' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='440' y='116' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='448' y='4' fill='currentColor' style='font-size:1em'>n</text>
<text text-anchor='middle' x='448' y='36' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='448' y='52' fill='currentColor' style='font-size:1em'>d</text>
<text text-anchor='middle' x='448' y='116' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='456' y='36' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='456' y='52' fill='currentColor' style='font-size:1em'>e</text>
<text text-anchor='middle' x='456' y='116' fill='currentColor' style='font-size:1em'>2</text>
<text text-anchor='middle' x='464' y='36' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='464' y='52' fill='currentColor' style='font-size:1em'>c</text>
<text text-anchor='middle' x='472' y='36' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='472' y='52' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='480' y='36' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='480' y='52' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='488' y='36' fill='currentColor' style='font-size:1em'>1</text>
<text text-anchor='middle' x='488' y='52' fill='currentColor' style='font-size:1em'>a</text>
<text text-anchor='middle' x='496' y='52' fill='currentColor' style='font-size:1em'>t</text>
<text text-anchor='middle' x='504' y='52' fill='currentColor' style='font-size:1em'>o</text>
<text text-anchor='middle' x='512' y='52' fill='currentColor' style='font-size:1em'>r</text>
<text text-anchor='middle' x='520' y='52' fill='currentColor' style='font-size:1em'>2</text>
</g>

    </svg>
  
</div>
<h3 id="parameterization">Parameterization<a hidden class="anchor" aria-hidden="true" href="#parameterization">#</a></h3>
<p>Decorators can be designed to take arguments. This requires the creation of a <em>decorator factory</em>, which returns a decorator. This is useful when you need to customize the behavior of the decorator for different functions:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">repeat</span><span class="p">(</span><span class="n">number_of_times</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_times</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">result</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">wrapper</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">decorator</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@repeat</span><span class="p">(</span><span class="n">number_of_times</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Hello </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">greet</span><span class="p">(</span><span class="s2">&#34;Alice&#34;</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="metadata-preserverance">Metadata Preserverance<a hidden class="anchor" aria-hidden="true" href="#metadata-preserverance">#</a></h3>
<p>By default decorators do not keep a function&rsquo;s metadata (name, docstring and annotations). This is typically achieved using <code>functools.wraps</code> in the decorator&rsquo;s wrapper function:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">functools</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">my_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@functools.wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;Wrapper function&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Something is happening before the function is called.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">wrapper</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@my_decorator</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">say_hello</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Say hello function&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Hello!&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">say_hello</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>  <span class="c1"># Outputs &#39;say_hello&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">say_hello</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>   <span class="c1"># Outputs &#39;Say hello function&#39;</span>
</span></span></code></pre></div><h3 id="non-functional-decorators-class-decorators">Non-Functional Decorators (Class Decorators)<a hidden class="anchor" aria-hidden="true" href="#non-functional-decorators-class-decorators">#</a></h3>
<p>Decorators aren&rsquo;t limited to functions; they can also be used to be applied to classes. Class decorators can modify or enhance class behavior in a similar way to function decorators:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">WrappedClass</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">new_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="s2">&#34;This is a new method added by the decorator&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">WrappedClass</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@decorator</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">OriginalClass</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">original_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s2">&#34;This method is part of the original class&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">obj</span> <span class="o">=</span> <span class="n">OriginalClass</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">new_method</span><span class="p">())</span>  <span class="c1"># Outputs: This is a new method added by the decorator</span>
</span></span></code></pre></div><h2 id="usage">Usage<a hidden class="anchor" aria-hidden="true" href="#usage">#</a></h2>
<h3 id="function-decorators">Function Decorators<a hidden class="anchor" aria-hidden="true" href="#function-decorators">#</a></h3>
<p>Decorators should be used when there is several functions that need to share common functionality, avoiding code duplication. For example, a great use case is logging and debugging the execution of a program. Decorators can be used to log entry, exit and various states of function execution without cluttering the actual business logic with logging code.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">log_execution</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Entering </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Exiting </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Execution status: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">result</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">wrapper</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@log_execution</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># function code here</span>
</span></span><span class="line"><span class="cl">    <span class="k">pass</span>
</span></span></code></pre></div><h3 id="decorators-as-performance-measurment">Decorators as Performance Measurment<a hidden class="anchor" aria-hidden="true" href="#decorators-as-performance-measurment">#</a></h3>
<p>Another use case is the usage of Decorators as performance measurement. A decorator can be developed to add timing code that records how long a functions takes to run.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">measure_time</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">execution_time</span> <span class="o">=</span> <span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Function </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> took </span><span class="si">{</span><span class="n">execution_time</span><span class="si">}</span><span class="s2"> seconds to run.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">result</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">wrapper</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@measure_time</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># function code here</span>
</span></span><span class="line"><span class="cl">    <span class="k">pass</span>
</span></span></code></pre></div><h3 id="decorators-for-access-control">Decorators for Access Control<a hidden class="anchor" aria-hidden="true" href="#decorators-for-access-control">#</a></h3>
<p>Certain function will require a finer access control and authentication policies. A decorator can be used to add this to certain function, ensuring that only authorized users are able to execute ceratin functionalities. This is common in web frameworks where ceratin routes or actions are restricted to logged-in users or users with specific roles.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># Simulating a user database and session</span>
</span></span><span class="line"><span class="cl"><span class="n">users</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;alice&#39;</span><span class="p">:</span> <span class="s1">&#39;password123&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;bob&#39;</span><span class="p">:</span> <span class="s1">&#39;securepassword&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">current_user</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34; Simulate user login, setting the current user if successful. &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">global</span> <span class="n">current_user</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">username</span> <span class="ow">in</span> <span class="n">users</span> <span class="ow">and</span> <span class="n">users</span><span class="p">[</span><span class="n">username</span><span class="p">]</span> <span class="o">==</span> <span class="n">password</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">current_user</span> <span class="o">=</span> <span class="n">username</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2"> has logged in successfully.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Failed login attempt.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">logout</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34; Log out the current user &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">global</span> <span class="n">current_user</span>
</span></span><span class="line"><span class="cl">    <span class="n">current_user</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;User has been logged out.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">is_logged_in</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34; Check if there&#39;s a user logged in &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">current_user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">login_required</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34; Decorator to ensure the user is logged in before calling the function &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_logged_in</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&#34;You must be logged in to access this function.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">wrapper</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@login_required</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">protected_function</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34; Function that only executes if the user is authenticated &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Access granted to </span><span class="si">{</span><span class="n">current_user</span><span class="si">}</span><span class="s2">. Running protected function.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Example usage</span>
</span></span><span class="line"><span class="cl"><span class="n">login</span><span class="p">(</span><span class="s1">&#39;alice&#39;</span><span class="p">,</span> <span class="s1">&#39;password123&#39;</span><span class="p">)</span>  <span class="c1"># Log in the user</span>
</span></span><span class="line"><span class="cl"><span class="n">protected_function</span><span class="p">()</span>           <span class="c1"># Should work as the user is logged in</span>
</span></span><span class="line"><span class="cl"><span class="n">logout</span><span class="p">()</span>                       <span class="c1"># Log out the user</span>
</span></span><span class="line"><span class="cl"><span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">protected_function</span><span class="p">()</span>       <span class="c1"># Should raise an exception as the user is not logged in</span>
</span></span><span class="line"><span class="cl"><span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="input-validation-with-decorators">Input Validation with Decorators<a hidden class="anchor" aria-hidden="true" href="#input-validation-with-decorators">#</a></h3>
<p>Another useful use-case is the use of decorators as input validating, which can be used to check the arguments apssed to a function before being executed. This helps maintaining clean and error-free data processing within functions</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">validate_inputs</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34; Decorator to validate that inputs to the function are positive numbers. &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Check all positional arguments</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="ow">or</span> <span class="n">arg</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&#34;All dimensions must be positive numbers.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Check all keyword arguments</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&#34;All dimensions must be positive numbers.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">wrapper</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@validate_inputs</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">calculate_area</span><span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34; Calculate the area of a rectangle given length and width, both must be positive numbers. &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">length</span> <span class="o">*</span> <span class="n">width</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Example usage</span>
</span></span><span class="line"><span class="cl"><span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Area:&#34;</span><span class="p">,</span> <span class="n">calculate_area</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>  <span class="c1"># Valid input</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Area:&#34;</span><span class="p">,</span> <span class="n">calculate_area</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>  <span class="c1"># This should raise an exception</span>
</span></span><span class="line"><span class="cl"><span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Area:&#34;</span><span class="p">,</span> <span class="n">calculate_area</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>  <span class="c1"># Valid input</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Area:&#34;</span><span class="p">,</span> <span class="n">calculate_area</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">width</span><span class="o">=-</span><span class="mi">3</span><span class="p">))</span>  <span class="c1"># This should raise an exception</span>
</span></span><span class="line"><span class="cl"><span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="decorators-as-caching-mechanisms">Decorators as Caching Mechanisms<a hidden class="anchor" aria-hidden="true" href="#decorators-as-caching-mechanisms">#</a></h3>
<p>Decorators can also be leverage as abastract caching mechanism. Any function that is decorated with this caching function can have their results cached before being returned. The following example displays how this caching mechanism can be used with a fibonnaci function. Before the decorated function is executed, the decorator retrieves any data that is cached and passes to the fibonnaci function.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">memorize</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34; Decorator that caches the results of the function calls. &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">cache</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Cache to store results of expensive function calls</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">args</span> <span class="ow">in</span> <span class="n">cache</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">cache</span><span class="p">[</span><span class="n">args</span><span class="p">]</span>  <span class="c1"># Return cached result if available</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>  <span class="c1"># Calculate result since it&#39;s not cached</span>
</span></span><span class="line"><span class="cl">        <span class="n">cache</span><span class="p">[</span><span class="n">args</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>  <span class="c1"># Store the new result in cache</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">result</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">wrapper</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@memorize</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34; Recursive function to calculate the nth Fibonacci number. &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>  <span class="c1"># Base cases</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">n</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Recursive call</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Example usage</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Fibonacci 10: </span><span class="si">{</span><span class="n">fibonacci</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>  <span class="c1"># This should compute and then cache all values up to Fib(10)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Fibonacci 20: </span><span class="si">{</span><span class="n">fibonacci</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>  <span class="c1"># This should use cached values for Fib(0) to Fib(10) and compute the rest</span>
</span></span></code></pre></div><h3 id="enrinching-metadata-with-decorators">Enrinching Metadata with Decorators<a hidden class="anchor" aria-hidden="true" href="#enrinching-metadata-with-decorators">#</a></h3>
<p>Decorators could be used to enrich metadata by appending additional information to the output of a function. The following example displays a nested decorator, which enriches the output of the decorated function.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">enrich_output</span><span class="p">(</span><span class="n">unit</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34; Decorator to enrich function outputs with additional data such as units. &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>  <span class="c1"># Get the original function result</span>
</span></span><span class="line"><span class="cl">            <span class="n">enriched_result</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">result</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="n">unit</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>  <span class="c1"># Enrich the output with additional information</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">enriched_result</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">wrapper</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">decorator</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@enrich_output</span><span class="p">(</span><span class="s1">&#39;square meters&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">calculate_area</span><span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34; Calculate the area of a rectangle given length and width. &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">length</span> <span class="o">*</span> <span class="n">width</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Example usage</span>
</span></span><span class="line"><span class="cl"><span class="n">area</span> <span class="o">=</span> <span class="n">calculate_area</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">area</span><span class="p">)</span>  <span class="c1"># Output will be a dictionary with the area and the units</span>
</span></span></code></pre></div><h3 id="event-handling-with-decorators">Event Handling with Decorators<a hidden class="anchor" aria-hidden="true" href="#event-handling-with-decorators">#</a></h3>
<p>Flask uses decorators to handle events. When a request is done to a specific Flask endpoint, Flask treats the HTTP request and triggers an action described in the decorated function. Then, when the function finishes execution, it takes the output and transforms it into a HTTP response.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">functools</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">logging</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Setting up logging</span>
</span></span><span class="line"><span class="cl"><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">event_notifier</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34; Decorator to notify events when the function is called and after it completes. &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@functools.wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Function </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> called with args: </span><span class="si">{</span><span class="n">args</span><span class="si">}</span><span class="s2"> and kwargs: </span><span class="si">{</span><span class="n">kwargs</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Function </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> completed successfully with result: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">result</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Function </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> raised an error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">raise</span>  <span class="c1"># Re-raise the exception after logging it</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">wrapper</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@event_notifier</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">add_numbers</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34; Adds two numbers and returns the result. &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@event_notifier</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">fail_function</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34; A function designed to fail to demonstrate error logging. &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&#34;Intentional error for demonstration.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Example usage</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Result of add_numbers:&#34;</span><span class="p">,</span> <span class="n">add_numbers</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>  <span class="c1"># Should log call and completion</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">fail_function</span><span class="p">()</span>  <span class="c1"># Should log the call and the error</span>
</span></span><span class="line"><span class="cl"><span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Caught an error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="class-decorators">Class Decorators<a hidden class="anchor" aria-hidden="true" href="#class-decorators">#</a></h3>
<p>As explained before, decorators aren&rsquo;t restricted to functions, they can also be used to extend a class functionality. They can be used to extend the functionality of several classes with additional methods, or alter existing methods. This is commonly used in framewors or libraries where certain behaviors need to be standardized across multiple classes. Decorators should be used in lieu of inheritance where flexibility and reusability are needed, improving the seperation of concerns. They can be dynamically applyed, meaning, they are applied at runtime, depending on the conditions of the program&rsquo;s execution or configuration.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">add_logging</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">WrappedClass</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">log_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method_name</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Method </span><span class="si">{</span><span class="n">method_name</span><span class="si">}</span><span class="s2"> started&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">result</span> <span class="o">=</span> <span class="n">method_name</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Method </span><span class="si">{</span><span class="n">method_name</span><span class="si">}</span><span class="s2"> ended&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">result</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="nb">super</span><span class="p">(),</span> <span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">attr</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_method</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">attr</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">wrapper</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">attr</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">WrappedClass</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@add_logging</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">SomeClass</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">method_one</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Executing method one&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">method_two</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Executing method two&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">obj</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">obj</span><span class="o">.</span><span class="n">method_one</span><span class="p">()</span>
</span></span></code></pre></div><p>### Ensure Classes Adhere to Interface</p>
<p>Furthermore, decorators can be used to ensure that certain classes adhere to a defined interface or abstract base class without using inheritance. This is particularly useful in large systems adhering to strict architectural patterns where specific methods must be implemented by multiple classes:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">ensure_interface</span><span class="p">(</span><span class="n">interface</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">missing_methods</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">interface</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">m</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">missing_methods</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Class </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> does not implement </span><span class="si">{</span><span class="n">missing_methods</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">cls</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">decorator</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@ensure_interface</span><span class="p">([</span><span class="s1">&#39;process&#39;</span><span class="p">,</span> <span class="s1">&#39;validate&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Processor</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">pass</span>  <span class="c1"># Implement the required method</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Validate method is intentionally missing to show the error</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># This will raise a TypeError indicating the &#39;validate&#39; method is missing.</span>
</span></span></code></pre></div><h3 id="singletons">Singletons<a hidden class="anchor" aria-hidden="true" href="#singletons">#</a></h3>
<p>Finally, decorators can be used to enforce the singleton pattern, limiting a class to a single instance throughout the lifetime of a program. This is commonly used in cases you need a controlled access point to a resrouce, such as a database connection or a configuration manager.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">singleton</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">instances</span> <span class="o">=</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">get_instance</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="bp">cls</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">instances</span><span class="p">[</span><span class="bp">cls</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">instances</span><span class="p">[</span><span class="bp">cls</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">get_instance</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@singleton</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DatabaseConnection</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;Connected&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Both instances will actually be the same object</span>
</span></span><span class="line"><span class="cl"><span class="n">db1</span> <span class="o">=</span> <span class="n">DatabaseConnection</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">db2</span> <span class="o">=</span> <span class="n">DatabaseConnection</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">db1</span> <span class="ow">is</span> <span class="n">db2</span><span class="p">)</span>  <span class="c1"># Outputs: True</span>
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/publishingdrafts/">
    <span class="title">« Prev</span>
    <br>
    <span>Publishing Drafts</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/introduction/">
    <span class="title">Next »</span>
    <br>
    <span>Introduction</span>
  </a>
</nav>

  </footer>
</article>


    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="http://localhost:1313/">Francisco Mendonca&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
